node('built-in') {
 
  stage('clone from repository') {
    checkout scm
  }
  
  stage('Build stage') {
        tool name: 'mvn3.8.4', type: 'maven'
        sh 'mvn clean install -DskipTests'
  }
  
  stage('Test stage') {
     if (branch == 'master') {
       sh 'mvn test'
     }
  }
  
  stage('Clean Workspace') {
      cleanWs()
  }
  
}
